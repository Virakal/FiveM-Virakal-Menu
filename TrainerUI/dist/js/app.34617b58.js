(function(t){function e(e){for(var i,r,o=e[0],c=e[1],u=e[2],l=0,g=[];l<o.length;l++)r=o[l],s[r]&&g.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(g.length)g.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var h=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("f684")},"1c27":function(t,e,n){"use strict";var i=n("6385"),s=n.n(i);s.a},3655:function(t,e,n){},"490b":function(t,e,n){"use strict";var i=n("3655"),s=n.n(i);s.a},6385:function(t,e,n){},"82a2":function(t,e,n){"use strict";var i=n("ca3b"),s=n.n(i);s.a},adae:function(t,e,n){},afe8:function(t,e,n){"use strict";var i=n("adae"),s=n.n(i);s.a},ca3b:function(t,e,n){},f684:function(t,e,n){"use strict";n.r(e);n("0d38");var i=n("af75"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"trainer-root"},on:{"&message":function(e){t.handleMessage(e)}}},[t.showTrainer?n("div",{attrs:{id:"trainercontainer"}},[n("p",{staticClass:"traineroption trainertitle"},[t._v(t._s(t.trainerTitle))]),t._l(t.menuPage,function(e,i){return n("TrainerOption",{key:t.getItemKey(e),class:{selected:i==t.selected},attrs:{sub:e.sub,action:e.action,state:t.getItemState(e.action)}},[t._v("\n            "+t._s(e.text)+"\n        ")])}),n("PageIndicator",{attrs:{page:t.page,"page-count":t.pageCount}})],2):t._e(),n("PreviewImage",{attrs:{img:t.currentImage}})],1)},a=[],r=n("69e1"),o=n.n(r),c=n("d8df"),u=n("523d"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.img?n("div",{staticClass:"imagecontainer"},[n("img",{attrs:{src:t.img}})]):t._e()},l=[];let g=class extends u["c"]{};c["a"]([Object(u["b"])()],g.prototype,"img",void 0),g=c["a"]([u["a"]],g);var p=g,d=p,f=(n("afe8"),n("a56e")),m=Object(f["a"])(d,h,l,!1,null,"32cd93a2",null),y=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"traineroption",attrs:{"data-sub":t.sub,"data-action":t.action,"data-state":t.state,"data-image":t.image}},[t._t("default")],2)},v=[];let S=class extends u["c"]{};c["a"]([Object(u["b"])()],S.prototype,"text",void 0),c["a"]([Object(u["b"])()],S.prototype,"sub",void 0),c["a"]([Object(u["b"])()],S.prototype,"action",void 0),c["a"]([Object(u["b"])()],S.prototype,"state",void 0),c["a"]([Object(u["b"])()],S.prototype,"image",void 0),S=c["a"]([u["a"]],S);var O=S,w=O,x=(n("82a2"),Object(f["a"])(w,b,v,!1,null,"2273d5e4",null)),P=x.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"pageindicator"},[t._v("Page "+t._s(t.page+1)+" / "+t._s(t.pageCount))])},_=[];let K=class extends u["c"]{};c["a"]([Object(u["b"])()],K.prototype,"page",void 0),c["a"]([Object(u["b"])()],K.prototype,"pageCount",void 0),K=c["a"]([u["a"]],K);var T=K,k=T,j=(n("1c27"),Object(f["a"])(k,M,_,!1,null,"ef3c0b74",null)),C=j.exports;let N=class extends u["c"]{constructor(){super(...arguments),this.trainerTitle="Virakal Trainer",this.resourceName="virakal-trainer",this.maxPageSize=12,this.showTrainer=!1,this.menus={mainmenu:[{text:"Waiting for menus to download..."}]},this.currentMenuKey="mainmenu",this.page=0,this.selected=0,this.recentSkins=[],this.configState={},this.itemStates={},this.configKeyActions={}}get pageCount(){return Math.ceil(this.menus[this.currentMenuKey].length/this.maxPageSize)}get menuPage(){return this.menus[this.currentMenuKey].slice(this.page*this.maxPageSize,(this.page+1)*this.maxPageSize)}get currentItem(){const t=this.page*this.maxPageSize+this.selected;return this.menus[this.currentMenuKey][t]}get currentImage(){const t=this.page*this.maxPageSize+this.selected;return this.menus[this.currentMenuKey][t]?this.menus[this.currentMenuKey][t].image:null}get currentMenu(){return this.menus[this.currentMenuKey]}get parentKey(){if("mainmenu"===this.currentMenuKey)return;const t=this.currentMenuKey.lastIndexOf(".");return-1===t?"mainmenu":this.currentMenuKey.substring(0,t)}sendData(t,e){return $.post(`http://${this.resourceName}/${t}`,o()(e),function(t){})}playSound(t){this.sendData("playsound",{name:t})}showPage(t){this.page=t,this.selected=0}pageExists(t){return t>=0&&t<this.pageCount}nextPage(){this.pageExists(this.page+1)?this.showPage(this.page+1):this.pageCount>1&&this.showPage(0),this.playSound("NAV_UP_DOWN")}previousPage(){this.pageExists(this.page-1)?this.showPage(this.page-1):this.pageCount>1&&this.showPage(this.pageCount-1),this.playSound("NAV_UP_DOWN")}selectUp(){this.selected=this.selected?this.selected-1:this.menuPage.length-1,this.playSound("NAV_UP_DOWN")}selectDown(){this.selected=(this.selected+1)%this.menuPage.length,this.playSound("NAV_UP_DOWN")}resetTrainer(){this.showMenu("mainmenu")}setMenu(t,e){for(let n in e){let t=e[n];if(null!=t.state&&null!=t.action){if(void 0!==t.configkey&&""!==t.configkey)if(t.configkey in this.configKeyActions){let e=this.configState[t.configkey],n=this.getStateText(e);console.log(`We know ${t.configkey} is ${this.configKeyActions[t.configkey]}. Setting itemStates[${t.action}] to ${n} (${e})`),this.itemStates[t.action]=n,t.state=n}else console.log(`We don't know ${t.configkey} so we're storing ${t.action} in the configKeyActions map.`),this.configKeyActions[t.configkey]=t.action,this.configState[t.configkey]="ON"===t.state;n in this.itemStates?t.state=this.itemStates[t.action]:this.itemStates[t.action]=t.state}}this.menus[t]=e,this.currentMenuKey===t&&(console.log("Forcing the update"),this.updateCurrentMenu())}updateCurrentMenu(){const t=this.currentMenuKey;this.currentMenuKey="mainmenu",this.$forceUpdate(),this.currentMenuKey=t,this.selected>=this.currentMenu.length&&(this.page=0,this.selected=0)}showMenu(t){if(!this.menus[t])return console.log(`No such menu as '${t}'`),void this.showMenu("mainmenu");this.selected=0,this.page=0,this.currentMenuKey=t}handleSelection(){const t=this.currentItem;if(t.sub)this.showMenu(t.sub);else if(t.action){console.log(`Doing ${t.action}`);let e=!0;t.state&&("ON"===t.state?(e=!1,t.state="OFF"):t.state="ON",this.itemStates[t.action]=t.state),this.$forceUpdate();const n=t.action.split(" ");console.log(`Sending ${n[0]}, action: ${n[1]}, newState: ${e}`),this.sendData(n[0],{action:n[1],newstate:e,itemtext:t.text})}this.playSound("SELECT")}goBack(){"undefined"===typeof this.parentKey?this.closeTrainer():this.showMenu(this.parentKey),this.playSound("BACK")}openTrainer(){this.resetTrainer(),this.showTrainer=!0,this.playSound("YES")}closeTrainer(){this.resetTrainer(),this.showTrainer=!1,this.sendData("trainerclose",{}),this.playSound("NO")}updateFromConfig(t){const e=JSON.parse(t);for(const n in e){let t=e[n];if(("true"===t||"false"===t)&&(console.log(`Setting config[${n}] to ${t}.`),this.configState[n]="true"===t,n in this.configKeyActions)){let e=this.configKeyActions[n];this.itemStates[e]=this.getStateText(t)}}this.$forceUpdate(),console.log(`Item States: ${o()(this.itemStates)}`)}getStateText(t){return"string"===typeof t&&(t="true"===t),t?"ON":"OFF"}getItemKey(t){return t.key||t.text}getItemState(t){return this.itemStates[t]}handleMessage(t){const e=t.data;e.showtrainer?this.openTrainer():e.hidetrainer&&this.closeTrainer(),e.trainerenter?this.handleSelection():e.trainerback&&this.goBack(),e.trainerleft?this.previousPage():e.trainerright&&this.nextPage(),e.trainerup?this.selectUp():e.trainerdown&&this.selectDown(),e.setmenu&&this.setMenu(e.menuname,e.menudata),e.configupdate&&this.updateFromConfig(e.config)}};N=c["a"]([Object(u["a"])({components:{PreviewImage:y,TrainerOption:P,PageIndicator:C}})],N);var I=N,A=I,D=(n("490b"),Object(f["a"])(A,s,a,!1,null,null,null)),E=D.exports;i["default"].config.productionTip=!0,new i["default"]({render:t=>t(E)}).$mount("#app")}});
//# sourceMappingURL=app.34617b58.js.map